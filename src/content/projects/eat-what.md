# Product Requirements Document (PRD)

## ðŸŽ¯ TÃªn Dá»± Ãn
**WhatEat - AI-Powered Nutrition & Health Tracking Platform**

Ná»n táº£ng tÆ° váº¥n dinh dÆ°á»¡ng thÃ´ng minh vá»›i AI, giÃºp ngÆ°á»i dÃ¹ng theo dÃµi sá»©c khá»e toÃ n diá»‡n, phÃ¢n tÃ­ch bá»¯a Äƒn tá»± Ä‘á»™ng, vÃ  xÃ¢y dá»±ng thÃ³i quen Äƒn uá»‘ng khoa há»c.

---

## ðŸ’¡ Giáº£i Quyáº¿t Váº¥n Äá» GÃ¬

### Váº¥n Ä‘á» hiá»‡n táº¡i
- **KhÃ³ khÄƒn trong viá»‡c theo dÃµi dinh dÆ°á»¡ng**: NgÆ°á»i dÃ¹ng khÃ´ng biáº¿t bá»¯a Äƒn cá»§a mÃ¬nh cÃ³ bao nhiÃªu calo, Ä‘áº¡m, bÃ©o, carb
- **Máº¥t thá»i gian tra cá»©u**: Pháº£i tÃ¬m kiáº¿m thÃ´ng tin dinh dÆ°á»¡ng tá»« nhiá»u nguá»“n khÃ¡c nhau, khÃ´ng chÃ­nh xÃ¡c
- **Thiáº¿u Ä‘á»™ng lá»±c duy trÃ¬**: KhÃ´ng cÃ³ há»‡ thá»‘ng gamification Ä‘á»ƒ khuyáº¿n khÃ­ch thÃ³i quen tá»‘t
- **Quáº£n lÃ½ sá»©c khá»e phÃ¢n tÃ¡n**: Dá»¯ liá»‡u cÃ¢n náº·ng, huyáº¿t Ã¡p, Ä‘Æ°á»ng huyáº¿t... lÆ°u nhiá»u nÆ¡i khÃ¡c nhau
- **Láº­p káº¿ hoáº¡ch Äƒn uá»‘ng khÃ³ khÄƒn**: KhÃ´ng biáº¿t nÃªn Äƒn gÃ¬ Ä‘á»ƒ Ä‘áº¡t má»¥c tiÃªu sá»©c khá»e

### Giáº£i phÃ¡p cá»§a WhatEat

#### 1ï¸âƒ£ **PhÃ¢n TÃ­ch Bá»¯a Ä‚n ThÃ´ng Minh vá»›i AI**
- Chá»¥p áº£nh mÃ³n Äƒn â†’ AI nháº­n diá»‡n vÃ  tÃ­nh toÃ¡n dinh dÆ°á»¡ng tá»± Ä‘á»™ng
- Nháº­p text mÃ´ táº£ â†’ AI phÃ¢n tÃ­ch chi tiáº¿t thÃ nh pháº§n vÃ  calories
- QuÃ©t OCR bao bÃ¬ â†’ TrÃ­ch xuáº¥t thÃ´ng tin dinh dÆ°á»¡ng tá»« nhÃ£n sáº£n pháº©m
- Há»— trá»£ bá»¯a Äƒn gia Ä‘Ã¬nh vá»›i pháº§n Äƒn riÃªng cho tá»«ng ngÆ°á»i

#### 2ï¸âƒ£ **Theo DÃµi Sá»©c Khá»e ToÃ n Diá»‡n**
- **Chá»‰ sá»‘ cÆ¡ thá»ƒ**: CÃ¢n náº·ng, BMI, sá»‘ Ä‘o vÃ²ng
- **Chá»‰ sá»‘ y táº¿**: Huyáº¿t Ã¡p, Ä‘Æ°á»ng huyáº¿t, cholesterol
- **Káº¿t quáº£ xÃ©t nghiá»‡m**: LÆ°u trá»¯ vÃ  phÃ¢n tÃ­ch lab results
- **Giáº¥c ngá»§**: Tracking cháº¥t lÆ°á»£ng giáº¥c ngá»§, naps
- **Váº­n Ä‘á»™ng**: Log hoáº¡t Ä‘á»™ng thá»ƒ cháº¥t

#### 3ï¸âƒ£ **Gamification - Äá»™ng Lá»±c Bá»n Vá»¯ng**
- **Achievements**: Há»‡ thá»‘ng thÃ nh tá»±u Ä‘a dáº¡ng
- **Daily Quests**: Nhiá»‡m vá»¥ hÃ ng ngÃ y Ä‘á»ƒ xÃ¢y dá»±ng thÃ³i quen
- **Streaks**: Theo dÃµi chuá»—i ngÃ y kiÃªn trÃ¬
- **Leaderboard**: Báº£ng xáº¿p háº¡ng cá»™ng Ä‘á»“ng
- **Leveling System**: Kiáº¿m XP vÃ  thÄƒng cáº¥p

#### 4ï¸âƒ£ **AI Personal Assistant - "Neangi"**
- Trá»£ lÃ½ AI cÃ¡ nhÃ¢n hÃ³a 24/7
- TÆ° váº¥n dinh dÆ°á»¡ng dá»±a trÃªn dá»¯ liá»‡u cÃ¡ nhÃ¢n
- Gá»£i Ã½ mÃ³n Äƒn phÃ¹ há»£p vá»›i má»¥c tiÃªu sá»©c khá»e
- Nháº¯c nhá»Ÿ vÃ  Ä‘á»™ng viÃªn proactive

#### 5ï¸âƒ£ **Meal Planning & Pantry Management**
- AI tá»± Ä‘á»™ng táº¡o thá»±c Ä‘Æ¡n phÃ¹ há»£p vá»›i má»¥c tiÃªu
- Quáº£n lÃ½ tá»§ láº¡nh/pantry vá»›i AI suggestions
- Gá»£i Ã½ mÃ³n Äƒn tá»« nguyÃªn liá»‡u cÃ³ sáºµn
- Táº¡o grocery list tá»± Ä‘á»™ng

#### 6ï¸âƒ£ **TÃ­nh NÄƒng XÃ£ Há»™i**
- Chia sáº» bá»¯a Äƒn vá»›i báº¡n bÃ¨
- Social feed vá»›i posts vá» meals, workouts, sleep
- Há»‡ thá»‘ng káº¿t báº¡n vÃ  tÆ°Æ¡ng tÃ¡c
- Meal sharing requests

---

## ðŸ› ï¸ CÃ´ng Nghá»‡ Äang Sá»­ Dá»¥ng

### Frontend Stack
```
Framework:        Next.js 15.5.4 (App Router)
Language:         TypeScript 5 (strict mode)
UI Library:       React 19.1.0
Styling:          Tailwind CSS 4
State:            Context API (Auth, Profile, Nutrition)
UI Components:    Headless UI, Framer Motion
Charts:           Recharts
i18n:             i18next, next-i18next (Vietnamese/English)
HTTP Client:      Axios (vá»›i token refresh & caching)
Icons:            Lucide React
Date:             date-fns, dayjs
Others:           html2canvas, jspdf, react-markdown
```

### Backend Stack
```
Framework:        NestJS 11.x
Language:         TypeScript 5
Runtime:          Node.js 22+ (supports Bun/Deno)
Architecture:     CQRS, Modular Design
Database:         PostgreSQL + TypeORM
Caching:          Redis
Queue:            BullMQ (async processing)
Authentication:   JWT (RS256 asymmetric)
Security:         Passport.js, bcrypt, helmet
API Docs:         Swagger/OpenAPI
```

### AI & ML Integration
```
OpenAI:           GPT-4, GPT-3.5-turbo, text-embedding-3-small
                  - Meal analysis & nutrition calculation
                  - Meal plan generation
                  - Semantic search (1536-dim embeddings)

Google Gemini:    Vision API for food recognition
DeepSeek:         Alternative cost-effective AI provider
Google Vision:    OCR for lab results & package scanning
```

### Infrastructure & Services
```
Cloud Storage:    AWS S3 (image uploads, pre-signed URLs)
Push Notifications: Firebase Cloud Messaging (FCM)
File Generation:  PDFKit
Monitoring:       Morgan (HTTP logging)
Containerization: Docker support
```

### Database Architecture
```
Entities:         68 entities across domains
Migrations:       79 migrations (schema evolution)
Naming:           snake_case strategy
Features:         JSONB columns, soft deletes, full-text search
```

### Key Technical Features
- **Semantic Caching**: Giáº£m 60-70% AI API calls báº±ng embedding similarity
- **BFF Pattern**: Backend for Frontend cho dashboard optimization
- **Queue-Based Processing**: Async meal analysis vá»›i retry logic
- **Event-Driven**: Achievement & quest tracking via event listeners
- **Hybrid Search**: Keyword (40%) + Semantic (60%) search
- **Multi-Language**: Vietnamese & English support
- **Token Refresh**: Automatic JWT refresh vá»›i mutex preventing race conditions

---

## ðŸš€ PhÃ¡t Triá»ƒn NÃ¢ng Cao Tiáº¿p Theo

### Phase 1: Core Enhancement (Q1-Q2 2026)

#### 1. **Mobile App Development**
- React Native hoáº·c Flutter app
- Offline-first architecture
- Camera integration tá»‘i Æ°u hÆ¡n
- Push notifications native
- Wearable device integration (Apple Watch, Fitbit)

#### 2. **AI Model Improvements**
- **Fine-tune custom models**: Train model riÃªng trÃªn Vietnamese dishes
- **Multi-modal AI**: Káº¿t há»£p text + image + context trong 1 request
- **Portion estimation**: AI Æ°á»›c lÆ°á»£ng khá»‘i lÆ°á»£ng tá»« áº£nh
- **Food detection accuracy**: NÃ¢ng Ä‘á»™ chÃ­nh xÃ¡c nháº­n diá»‡n mÃ³n Viá»‡t lÃªn 95%+

#### 3. **Advanced Health Analytics**
- **Predictive analytics**: Dá»± Ä‘oÃ¡n xu hÆ°á»›ng sá»©c khá»e
- **Correlation insights**: PhÃ¢n tÃ­ch má»‘i liÃªn há»‡ meal-health metrics
- **Personalized recommendations**: ML-based suggestions
- **Health risk assessment**: Cáº£nh bÃ¡o sá»›m rá»§i ro sá»©c khá»e

### Phase 2: Social & Community (Q3 2026)

#### 4. **Enhanced Social Features**
- **Community groups**: NhÃ³m theo má»¥c tiÃªu (giáº£m cÃ¢n, tÄƒng cÆ¡...)
- **Challenges**: Thá»­ thÃ¡ch cá»™ng Ä‘á»“ng cÃ³ thá»i háº¡n
- **Expert connection**: Káº¿t ná»‘i vá»›i chuyÃªn gia dinh dÆ°á»¡ng
- **Recipe sharing**: Chia sáº» cÃ´ng thá»©c náº¥u Äƒn
- **Live streaming**: Livestream náº¥u Äƒn, workout

#### 5. **Marketplace Integration**
- **Food delivery**: TÃ­ch há»£p Ä‘áº·t Ä‘á»“ Äƒn tá»« meal plans
- **Grocery delivery**: Order nguyÃªn liá»‡u tá»« pantry suggestions
- **Supplement store**: Mua thá»±c pháº©m chá»©c nÄƒng
- **Coach booking**: Äáº·t lá»‹ch tÆ° váº¥n vá»›i chuyÃªn gia

### Phase 3: Enterprise & B2B (Q4 2026)

#### 6. **Enterprise Solutions**
- **Corporate wellness**: GÃ³i cho doanh nghiá»‡p
- **Gym/Fitness center integration**: White-label solution
- **Hospital/Clinic version**: HIPAA-compliant medical version
- **School nutrition**: Giáº£i phÃ¡p cho trÆ°á»ng há»c
- **Insurance partnership**: TÃ­ch há»£p vá»›i báº£o hiá»ƒm sá»©c khá»e

#### 7. **Advanced Integrations**
- **Continuous Glucose Monitor (CGM)**: Real-time glucose tracking
- **Smart scales**: Auto-sync Bluetooth scales
- **Food delivery APIs**: Grab, ShopeeFood, GoFood integration
- **Telemedicine**: Video consultation vá»›i bÃ¡c sÄ©
- **Lab partners**: Direct lab result import

### Phase 4: AI & Automation (2027)

#### 8. **Next-Gen AI Features**
- **Voice-first interface**: Hands-free meal logging
- **AR meal scanning**: Augmented reality food recognition
- **Proactive health coaching**: AI chá»§ Ä‘á»™ng can thiá»‡p
- **Genetic-based nutrition**: DNA test integration cho nutrition cÃ¡ nhÃ¢n hÃ³a
- **Mental health integration**: Mood tracking + nutrition correlation

#### 9. **Platform Expansion**
- **Smart home integration**: Alexa, Google Home voice commands
- **Smartwatch app**: Standalone watch app
- **Desktop app**: Electron-based desktop client
- **Browser extension**: Quick meal logging tá»« web

### Phase 5: Data & Research (Ongoing)

#### 10. **Research & Development**
- **Anonymized data research**: NghiÃªn cá»©u xu hÆ°á»›ng dinh dÆ°á»¡ng VN
- **Academic partnerships**: Há»£p tÃ¡c vá»›i trÆ°á»ng Ä‘áº¡i há»c
- **Open dataset**: Public dataset vá» mÃ³n Äƒn Viá»‡t Nam
- **White papers**: Publish research findings
- **API for researchers**: Developer API cho nghiÃªn cá»©u khoa há»c

---

## ðŸ“Š Success Metrics

### User Engagement
- **DAU/MAU ratio**: >40%
- **Average session duration**: >5 minutes
- **Meal logs per user/week**: >15
- **7-day retention**: >60%
- **30-day retention**: >40%

### Technical Performance
- **API response time**: <200ms (p95)
- **AI analysis time**: <3 seconds
- **App load time**: <2 seconds
- **Uptime**: 99.9%
- **Semantic cache hit rate**: >60%

### Business Goals
- **User growth**: 20% MoM
- **Premium conversion**: >5%
- **NPS score**: >50
- **Churn rate**: <5% monthly

---

## ðŸŽ¯ Target Users

### Primary
- **Health-conscious individuals** (25-45 tuá»•i)
- **Fitness enthusiasts** muá»‘n track macro
- **NgÆ°á»i Ä‘ang giáº£m cÃ¢n/tÄƒng cÃ¢n**
- **Bá»‡nh nhÃ¢n tiá»ƒu Ä‘Æ°á»ng** cáº§n quáº£n lÃ½ dinh dÆ°á»¡ng

### Secondary
- **Gia Ä‘Ã¬nh** muá»‘n Äƒn uá»‘ng lÃ nh máº¡nh
- **Váº­n Ä‘á»™ng viÃªn** chuyÃªn nghiá»‡p
- **NgÆ°á»i báº­n rá»™n** cáº§n meal planning nhanh
- **NgÆ°á»i cao tuá»•i** theo dÃµi sá»©c khá»e

---

**Document Version**: 1.0
**Last Updated**: January 2, 2026
**Owner**: WhatEat Product Team
